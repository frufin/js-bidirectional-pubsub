var events={};!function(n){var t={},e=-1,r=1e4;n.on=function(n,r){t[n]||(t[n]=[]);var i=(++e).toString();return t[n].push({token:i,func:r}),i},n.emit=function(n,e,i){return!!t[n]&&(setTimeout(function(){for(var o=t[n],f=o?o.length:0;f--;)if(i){var u=String(performance.now())+Math.random().toString(36).substr(2,10);setTimeout(function(){delete t[u]},r),bips.on(u,function(){delete t[u],i.apply(this,arguments)});var c=function(n){bips.emit(u,n)};o[f].func(e,c)}else o[f].func(e)},0),!0)},n.off=function(n){for(var e in t)if(t[e])for(var r=0,i=t[e].length;r<i;r++)if(t[e][r].token===n)return t[e].splice(r,1),n;return!1}}(events);