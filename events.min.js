var events={};!function(n){var t={},e=-1,r=1e4;n.subscribe=function(n,r){t[n]||(t[n]=[]);var u=(++e).toString();return t[n].push({token:u,func:r}),u},n.publish=function(e,i,o){return!!t[e]&&(setTimeout(function(){for(var f=t[e],s=f?f.length:0;s--;)if(o){var c=u();setTimeout(function(){delete t[c]},r),n.subscribe(c,function(){delete t[c],o.apply(this,arguments)});var a=function(t){n.publish(c,t)};f[s].func(i,a)}else f[s].func(i)},0),!0)},n.unsubscribe=function(n){for(var e in t)if(t[e])for(var r=0,u=t[e].length;r<u;r++)if(t[e][r].token===n)return t[e].splice(r,1),n;return!1};var u=function(){return String(performance.now())+Math.random().toString(36).substr(2,10)}}(events);